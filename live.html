<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Quick Photos Album - powered by Cloudinary</title>

</head>

<body>
    <div class="albumheader">
        <h1 id="albumtitle">Album Title Placeholder</h1>
        <h2 id="albumdescription">If you can see this.... no data has been loaded</h2>
    </div>

    <div id="albumcontents">
    </div>


    <script>

        const urlParams = new URLSearchParams(window.location.search);
        const album_name = urlParams.get('album');
        // *** Change cloud_name to be the name of your Cloudinary account
        const cloud_name = 'quickalbum'; 
        

        window.addEventListener('DOMContentLoaded', (event) => {
            if ((album_name) && (cloud_name)) {
                loadPageDetails();
                loadImages();
            };

        });


        function loadPageDetails() {
            const title_object = document.getElementById('albumtitle');
            const description_object = document.getElementById('albumdescription');

            title_object.innerHTML = "The '" + album_name + "' Album";
            description_object.innerHTML = "Loaded from the '" + cloud_name + "' Account";    
        }



        function loadImages() {
            var album_contents_url = "https://res.cloudinary.com/" + cloud_name + "/image/list/" + album_name + ".json";
            const contents_object = document.getElementById('albumcontents');

            fetch(album_contents_url)
                .then((resp) => resp.json())
                .then(function (data) {


                    let imagelist = data.resources;

                    contents_object.innerHTML = JSON.stringify(data.resources);
                    
                })
                .catch(function () {
                    // todo : catch errors
                });

        };

    </script>


</body>
</html>